<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULTIMATE AI Trading System - Full Featured</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container { max-width: 1600px; margin: 0 auto; padding: 20px; }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
            animation: glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #4ade80; }
            to { text-shadow: 0 0 20px #fff, 0 0 30px #4ade80, 0 0 40px #4ade80; }
        }
        
        .header h1 { font-size: 3.5em; margin-bottom: 10px; }
        .header p { font-size: 1.3em; opacity: 0.9; }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: transform 0.3s;
        }
        
        .stat-card:hover { transform: translateY(-5px); }
        .stat-card h3 { font-size: 2em; margin-bottom: 10px; color: #4ade80; }
        .stat-card p { font-size: 1em; opacity: 0.8; }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .btn-start { background: linear-gradient(45deg, #4ade80, #22c55e); color: white; }
        .btn-stop { background: linear-gradient(45deg, #ef4444, #dc2626); color: white; }
        .btn-reset { background: linear-gradient(45deg, #f59e0b, #d97706); color: white; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
        
        .activity-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .activity-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-height: 500px;
            overflow-y: auto;
        }
        
        .activity-card h3 { margin-bottom: 15px; font-size: 1.5em; color: #4ade80; }
        
        .activity-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #4ade80;
        }
        
        .activity-item .timestamp { font-size: 0.9em; opacity: 0.7; margin-bottom: 5px; }
        .activity-item .content { font-size: 0.95em; }
        
        .ai-model { color: #60a5fa; font-weight: bold; }
        .thinking-style { color: #fbbf24; font-style: italic; }
        .confidence { color: #4ade80; font-weight: bold; }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-active {
            background: #4ade80;
            animation: pulse 2s infinite;
        }
        
        .status-inactive { background: #6b7280; }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        .gem-card {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 10px;
            color: #1f2937;
        }
        
        .gem-card h4 { font-size: 1.3em; margin-bottom: 5px; }
        .gem-card .gem-score { font-size: 1.1em; font-weight: bold; color: #059669; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üåü ULTIMATE AI TRADING SYSTEM üåü</h1>
            <p>Unlimited AI Democracy + Multi-Exchange + Hidden Gem Hunter + ML Backtesting</p>
            <p><strong>GOAL: $30 ‚Üí $10,000 in ONE WEEK</strong></p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <h3 id="portfolio-value">$30.00</h3>
                <p>Portfolio Value</p>
            </div>
            <div class="stat-card">
                <h3 id="total-trades">0</h3>
                <p>Total Trades</p>
            </div>
            <div class="stat-card">
                <h3 id="ai-calls">0</h3>
                <p>AI Decisions</p>
            </div>
            <div class="stat-card">
                <h3 id="hidden-gems">0</h3>
                <p>Hidden Gems</p>
            </div>
            <div class="stat-card">
                <h3 id="active-models">0/0</h3>
                <p>Active AI Models</p>
            </div>
            <div class="stat-card">
                <h3 id="thinking-styles">0</h3>
                <p>Thinking Styles</p>
            </div>
            <div class="stat-card">
                <h3 id="exchanges">0</h3>
                <p>Exchanges</p>
            </div>
            <div class="stat-card">
                <h3 id="trading-status">
                    <span class="status-indicator status-inactive"></span>
                    Inactive
                </h3>
                <p>Trading Status</p>
            </div>
        </div>
        
        <div class="controls">
            <button class="btn btn-start" onclick="startTrading()">üöÄ START ULTIMATE SYSTEM</button>
            <button class="btn btn-stop" onclick="stopTrading()">‚èπÔ∏è STOP SYSTEM</button>
            <button class="btn btn-reset" onclick="resetPortfolio()">üîÑ RESET PORTFOLIO</button>
        </div>
        
        <div class="activity-section">
            <div class="activity-card">
                <h3>ü§ñ AI Decisions (Democratic Voting)</h3>
                <div id="ai-activity"></div>
            </div>
            <div class="activity-card">
                <h3>üí∞ Trade Execution (Multi-Exchange)</h3>
                <div id="trade-activity"></div>
            </div>
            <div class="activity-card">
                <h3>üíé Hidden Gems Discovered</h3>
                <div id="gems-activity"></div>
            </div>
        </div>
    </div>

    <script>
        let updateInterval;
        
        function updateDashboard() {
            fetch('/api/status')
                .then(response => response.json())
                .then(data => {
                    document.getElementById('portfolio-value').textContent = `$${data.portfolio_value.toFixed(2)}`;
                    document.getElementById('total-trades').textContent = data.total_trades;
                    document.getElementById('ai-calls').textContent = data.ai_calls;
                    document.getElementById('hidden-gems').textContent = data.hidden_gems;
                    document.getElementById('active-models').textContent = `${data.active_models}/${data.total_models}`;
                    document.getElementById('thinking-styles').textContent = data.thinking_styles;
                    document.getElementById('exchanges').textContent = data.exchanges;
                    
                    const statusElement = document.getElementById('trading-status');
                    if (data.trading_active) {
                        statusElement.innerHTML = '<span class="status-indicator status-active"></span>ACTIVE';
                    } else {
                        statusElement.innerHTML = '<span class="status-indicator status-inactive"></span>INACTIVE';
                    }
                })
                .catch(error => console.error('Error:', error));
            
            fetch('/api/ai_responses')
                .then(response => response.json())
                .then(data => {
                    const aiActivity = document.getElementById('ai-activity');
                    aiActivity.innerHTML = '';
                    
                    data.slice(-30).reverse().forEach(response => {
                        const activityDiv = document.createElement('div');
                        activityDiv.className = 'activity-item';
                        
                        const timestamp = new Date(response.timestamp).toLocaleTimeString();
                        const picks = response.decision.top_picks || [];
                        const topPick = picks[0] || {asset: 'N/A', confidence: 0};
                        
                        activityDiv.innerHTML = `
                            <div class="timestamp">${timestamp}</div>
                            <div class="content">
                                <span class="ai-model">${response.model}</span> using 
                                <span class="thinking-style">${response.thinking_style}</span><br>
                                Top Pick: <strong>${topPick.asset}</strong> 
                                (Confidence: <span class="confidence">${(topPick.confidence * 100).toFixed(0)}%</span>)
                            </div>
                        `;
                        aiActivity.appendChild(activityDiv);
                    });
                })
                .catch(error => console.error('Error:', error));
            
            fetch('/api/trades')
                .then(response => response.json())
                .then(data => {
                    const tradeActivity = document.getElementById('trade-activity');
                    tradeActivity.innerHTML = '';
                    
                    data.slice(-30).reverse().forEach(trade => {
                        const activityDiv = document.createElement('div');
                        activityDiv.className = 'activity-item';
                        
                        const timestamp = new Date(trade.timestamp).toLocaleTimeString();
                        
                        activityDiv.innerHTML = `
                            <div class="timestamp">${timestamp}</div>
                            <div class="content">
                                <strong>${trade.action}</strong> ${trade.quantity.toFixed(4)} ${trade.symbol} 
                                at $${trade.price.toFixed(2)}<br>
                                Exchange: <span class="ai-model">${trade.exchange}</span> | 
                                AI: <span class="thinking-style">${trade.ai_model}</span>
                            </div>
                        `;
                        tradeActivity.appendChild(activityDiv);
                    });
                })
                .catch(error => console.error('Error:', error));
            
            fetch('/api/hidden_gems')
                .then(response => response.json())
                .then(data => {
                    const gemsActivity = document.getElementById('gems-activity');
                    gemsActivity.innerHTML = '';
                    
                    if (data.length === 0) {
                        gemsActivity.innerHTML = '<p style="opacity: 0.7;">Scanning for hidden gems...</p>';
                    } else {
                        data.slice(-10).reverse().forEach(gem => {
                            const gemDiv = document.createElement('div');
                            gemDiv.className = 'gem-card';
                            
                            gemDiv.innerHTML = `
                                <h4>üíé ${gem.symbol}</h4>
                                <div class="gem-score">Score: ${(gem.gem_score * 100).toFixed(0)}% | ${gem.ai_votes} AI Votes</div>
                                <p><strong>Catalyst:</strong> ${gem.catalyst}</p>
                                <p><strong>Upside:</strong> ${gem.potential_upside}</p>
                            `;
                            gemsActivity.appendChild(gemDiv);
                        });
                    }
                })
                .catch(error => console.error('Error:', error));
        }
        
        function startTrading() {
            fetch('/api/start_trading', { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    console.log('Ultimate system started:', data);
                    updateDashboard();
                })
                .catch(error => console.error('Error:', error));
        }
        
        function stopTrading() {
            fetch('/api/stop_trading', { method: 'POST' })
                .then(response => response.json())
                .then(data => {
                    console.log('Ultimate system stopped:', data);
                    updateDashboard();
                })
                .catch(error => console.error('Error:', error));
        }
        
        function resetPortfolio() {
            if (confirm('Reset portfolio to $30?')) {
                fetch('/api/reset_portfolio', { method: 'POST' })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Portfolio reset:', data);
                        updateDashboard();
                    })
                    .catch(error => console.error('Error:', error));
            }
        }
        
        updateDashboard();
        updateInterval = setInterval(updateDashboard, 3000);
        
        window.addEventListener('beforeunload', () => {
            if (updateInterval) clearInterval(updateInterval);
        });
    </script>
</body>
</html>